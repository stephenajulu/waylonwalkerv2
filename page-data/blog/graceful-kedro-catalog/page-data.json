{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/graceful-kedro-catalog/","result":{"data":{"markdownRemark":{"id":"1dad300c-3663-5f8d-bd6f-a4bef7b23243","html":"<h2>Why use kedro catalog?</h2>\n<p>While using the catalog alone will not reap all of the benefits of the framework, it does get you and your project ready for the full framework eventually.  For me the full benefit of the catalog comes when you combine it with the pipeline and dont even touch read/write steps at all.</p>\n<p>Taking a step into kedro by adopting the catalog first will give you a way to organize all of your data loads in one place, and stop manually writing read/write code, which can be different for each data and storage type. You just don't need to think about it.</p>\n<hr>\n<ul>\n<li>iperitive loading style</li>\n<li>organizes your data</li>\n<li>all file locations can be quickly identified</li>\n<li>can be dropped into kedro later</li>\n</ul>\n<hr>\n<blockquote>\n<p>\"can be dropped into kedro later\"\nLet's talk a bit more about that</p>\n</blockquote>\n<h2>2 Ways to Gracefully adopt the catalog</h2>\n<p><em>How do I get started with the kedro catalog</em></p>\n<ul>\n<li>add with the code api</li>\n<li>load from yaml (<strong>recommended</strong>)</li>\n</ul>\n<h2>1. Adding to the catalog with the code api</h2>\n<p><em>how to use the kedro catalog code api</em></p>\n<p>It is possible to keep everything inside of one single file if you want by utilizing the code api, which defines the kedro catalog inside of your script with python.  I personally like this method as it is a bit more scriptable to create many layers of datasets with a for loop.  It can still be carried right into a kedro project, but is not the normal way that other kedro users will be used to seeing.  I'll leave it up to you which technique to use.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> DataCatalog\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>extras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>pandas <span class=\"token keyword\">import</span> CSVDataSet\n\nio <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"bikes\"</span><span class=\"token punctuation\">:</span> CSVDataSet<span class=\"token punctuation\">(</span>filepath<span class=\"token operator\">=</span><span class=\"token string\">\"../data/01_raw/bikes.csv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>taken right from the kedro <a href=\"https://kedro.readthedocs.io/en/stable/04_user_guide/04_data_catalog.html\">docs</a></p>\n</blockquote>\n<p>ðŸ‘† This can be done inside of a single Jupyter cell, and pulled out later.</p>\n<h2>2. Creating a catalog config file</h2>\n<p><strong>recommended</strong></p>\n<p>This reccommended method it great since it will simply drop right in to a full kedro project if you were ever ready to adopt the framework as a whole.  The downside to gracefully adopting the framework is that you need to have a bit of an understanding of the internals to do it.  When using the framework as a whole it seemlessly takes care of everything for you.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># conf/base/catalog.yml</span>\n<span class=\"token comment\"># Example 1: Loads / saves a CSV file from / to a local file system</span>\n\n<span class=\"token key atrule\">bikes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/bikes.csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>config <span class=\"token keyword\">import</span> ConfigLoader\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> DataCatalog\n\nconf_loader <span class=\"token operator\">=</span> ConfLoader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'conf/base'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nconf_catalog <span class=\"token operator\">=</span> conf_loader<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'catalog*'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'catalog/**'</span><span class=\"token punctuation\">)</span>\ncatalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">.</span>from_config<span class=\"token punctuation\">(</span>conf_catalog<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>You can even do this ðŸ‘† from a Jupyter notebook</p>\n</blockquote>\n<p>If you do happen to be in a module deeper into an existing library I tend to leverage the use of the <code class=\"language-text\">__file__</code> magic.  <code class=\"language-text\">__file__</code> is a string containing the location of the current file.  You can initiate a <code class=\"language-text\">Path</code> object from this and roll up the necessary number of directories with the <code class=\"language-text\">parents</code> attribute then into the <code class=\"language-text\">conf/base</code> directory.  I find this more <strong>more robust</strong> as it does not depend on your current working directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pathlib <span class=\"token keyword\">import</span> Path\nconf_loader <span class=\"token operator\">=</span> ConfLoader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Path<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parents<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token string\">'conf/base'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nconf_catalog <span class=\"token operator\">=</span> conf_loader<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"catalog*\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"catalog/**\"</span><span class=\"token punctuation\">)</span>\nnew_catalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">.</span>from_config<span class=\"token punctuation\">(</span>conf_catalog<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>I find leveraging the <code class=\"language-text\">__file__</code> magic a bit more robust when possible as it does not depend on your current working directory.</p>\n</blockquote>\n<h2>Adhoc adding to an existing kedro catalog</h2>\n<p>Let's say that you are already using a kedro project, but you are wanting to develop new features entirely in the context of a notebook.  You can easily create a catalog as shown above.  Since the kedro catalog variable is typically <code class=\"language-text\">catalog</code>, we will call it <code class=\"language-text\">new_catalog</code> and add it to the existing <code class=\"language-text\">catalog</code> below.  If you are not quite sure what that <code class=\"language-text\">**catalog</code> syntax is doing check out my article on <code class=\"language-text\">**kwargs</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">catalog<span class=\"token punctuation\">.</span>add_feed_dict<span class=\"token punctuation\">(</span>new_catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">)</span></code></pre></div>\n<p><a href=\"https://waylonwalker.com/blog/python-args-kwargs\"><img src=\"https://waylonwalker.com/python-args-kwargs.png\" alt=\"python args and kwargs\"></a></p>\n<blockquote>\n<p><a href=\"https://waylonwalker.com/blog/python-args-kwargs\">python args and kwargs</a> article by <a href=\"https://twitter.com/_WaylonWalker\">@_waylonwalker</a></p>\n</blockquote>\n<p>The framework makes appending</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">catalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">**</span>catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>new_catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n``\n\n\n\n<span class=\"token comment\">## One word of caution</span>\n\n\nIf you have <span class=\"token builtin\">any</span> hooks running `after_catalog_created`<span class=\"token punctuation\">,</span> they will <span class=\"token keyword\">not</span> be run on the appended catalog entries<span class=\"token punctuation\">.</span></code></pre></div>","fields":{"slug":"/blog/graceful-kedro-catalog/"},"frontmatter":{"date":"2020-06-29T03:00:00.000Z","devto_url":"","devto_id":"","title":"Gracefully adopt kedro, the catalog","description":null,"path":"graceful-kedro-catalog","twitter_cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/graceful-kedro-catalog.png","childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABwklEQVQY02MQV9RX1TV7//JSfGq+T3Csq2+4hYNPZ+8UMztPLWN7BXUzJXULXV0HXT17I2NHU1MnYxMHQxNbYzNbIxMrBlEFPR0TuzMn99Q0de7cc2Dh8jVrNm29dONmVVPH2QuXYmJz+aU01HSsVXQstfWs1fUs1PXM9Qyt9Awt9A3NGSSVDWQ0jJUNrK2c/XzDE9x8IsoK66c3Tbez9FmzYL2He7iemk2oRWSSTUK+fXqcTXSoZYiuvqWuvrmegRmDsKKOva5Hm2NphXX2JIfqJpvCUvMMIGOZV5etqkumeeJK395lfj2rA/rWB05Y6Ns+1ave2Mha29hOz8CcQUBBy8PQv9253FnfO8s6xc84yMnAy1zX2d3AV1ndTEXdXF3NQk/H3tjAyUjfwdjAwc3YXk9L1trawMbanEFCWV9WxUhCSZ9PXoNHTl1AXktQQVtYQQdoqLiSnpiSnoiiDtBrmro2Ono2ugY2mhpyEhJieuqS5mYmID8DFUko6UkpG0gpG0opGUgq6QPNklQykAAzgEhcUU9GxVBDG+hVG00tYxFhIRl5NWkVIwa4CvwIqF9CUU9O1UhZ00xKUQfEVdIHAK6qd0Bb/ZbBAAAAAElFTkSuQmCC","width":800,"height":418,"src":"/static/55622a2c451dfd220ec32b3d58be9896/267c5/graceful-kedro-catalog.png","srcSet":"/static/55622a2c451dfd220ec32b3d58be9896/267c5/graceful-kedro-catalog.png 1x"}}},"cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/graceful-kedro-catalog.png","childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABwklEQVQY02MQV9RX1TV7//JSfGq+T3Csq2+4hYNPZ+8UMztPLWN7BXUzJXULXV0HXT17I2NHU1MnYxMHQxNbYzNbIxMrBlEFPR0TuzMn99Q0de7cc2Dh8jVrNm29dONmVVPH2QuXYmJz+aU01HSsVXQstfWs1fUs1PXM9Qyt9Awt9A3NGSSVDWQ0jJUNrK2c/XzDE9x8IsoK66c3Tbez9FmzYL2He7iemk2oRWSSTUK+fXqcTXSoZYiuvqWuvrmegRmDsKKOva5Hm2NphXX2JIfqJpvCUvMMIGOZV5etqkumeeJK395lfj2rA/rWB05Y6Ns+1ave2Mha29hOz8CcQUBBy8PQv9253FnfO8s6xc84yMnAy1zX2d3AV1ndTEXdXF3NQk/H3tjAyUjfwdjAwc3YXk9L1trawMbanEFCWV9WxUhCSZ9PXoNHTl1AXktQQVtYQQdoqLiSnpiSnoiiDtBrmro2Ono2ugY2mhpyEhJieuqS5mYmID8DFUko6UkpG0gpG0opGUgq6QPNklQykAAzgEhcUU9GxVBDG+hVG00tYxFhIRl5NWkVIwa4CvwIqF9CUU9O1UhZ00xKUQfEVdIHAK6qd0Bb/ZbBAAAAAElFTkSuQmCC","width":1000,"height":420,"src":"/static/55622a2c451dfd220ec32b3d58be9896/a8734/graceful-kedro-catalog.png","srcSet":"/static/55622a2c451dfd220ec32b3d58be9896/a8734/graceful-kedro-catalog.png 1x"},"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABwklEQVQY02MQV9RX1TV7//JSfGq+T3Csq2+4hYNPZ+8UMztPLWN7BXUzJXULXV0HXT17I2NHU1MnYxMHQxNbYzNbIxMrBlEFPR0TuzMn99Q0de7cc2Dh8jVrNm29dONmVVPH2QuXYmJz+aU01HSsVXQstfWs1fUs1PXM9Qyt9Awt9A3NGSSVDWQ0jJUNrK2c/XzDE9x8IsoK66c3Tbez9FmzYL2He7iemk2oRWSSTUK+fXqcTXSoZYiuvqWuvrmegRmDsKKOva5Hm2NphXX2JIfqJpvCUvMMIGOZV5etqkumeeJK395lfj2rA/rWB05Y6Ns+1ave2Mha29hOz8CcQUBBy8PQv9253FnfO8s6xc84yMnAy1zX2d3AV1ndTEXdXF3NQk/H3tjAyUjfwdjAwc3YXk9L1trawMbanEFCWV9WxUhCSZ9PXoNHTl1AXktQQVtYQQdoqLiSnpiSnoiiDtBrmro2Ono2ugY2mhpyEhJieuqS5mYmID8DFUko6UkpG0gpG0opGUgq6QPNklQykAAzgEhcUU9GxVBDG+hVG00tYxFhIRl5NWkVIwa4CvwIqF9CUU9O1UhZ00xKUQfEVdIHAK6qd0Bb/ZbBAAAAAElFTkSuQmCC","aspectRatio":2.380952380952381,"src":"/static/55622a2c451dfd220ec32b3d58be9896/a8734/graceful-kedro-catalog.png","srcSet":"/static/55622a2c451dfd220ec32b3d58be9896/2d6f8/graceful-kedro-catalog.png 250w,\n/static/55622a2c451dfd220ec32b3d58be9896/03ac3/graceful-kedro-catalog.png 500w,\n/static/55622a2c451dfd220ec32b3d58be9896/a8734/graceful-kedro-catalog.png 1000w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"1dad300c-3663-5f8d-bd6f-a4bef7b23243"}}}