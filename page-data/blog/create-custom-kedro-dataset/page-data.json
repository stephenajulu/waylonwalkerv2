{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/create-custom-kedro-dataset/","result":{"data":{"markdownRemark":{"id":"a287e129-b1da-5802-9dae-6d7f98057ba8","html":"<p>Kedro provides an efficient way to build out data catalogs with their yaml api.  It allows you to be very declaritive about loading and saving your data.  For the most part you just need to tell Kedro what connector to use and its filepath.  When running Kedro takes care of all of the read/write, you just reference the catalog key.</p>\n<h2>But what is happening behind the scenes</h2>\n<p>Under the hood there is an <code class=\"language-text\">AbstractDataSet</code> that each connector inherits from.  It sets up a lot of the behind the scenes structure for us so that we dont have to.  For the most part kedro has connectors for about anything that you want to load, csv, parquet, sql, json, from about anywhere, http, s3, localfile system are just some of the examples.</p>\n<p>Here is a DataSet implementation from their docs.  Here you can see the barebones example straight from the docs.  Parameters from the yaml catalog will get passed in</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pathlib <span class=\"token keyword\">import</span> Path\n\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> AbstractVersionedDataSet\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyOwnDataSet</span><span class=\"token punctuation\">(</span>AbstractDataSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> param1<span class=\"token punctuation\">,</span> param2<span class=\"token punctuation\">,</span> filepath<span class=\"token punctuation\">,</span> version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span>Path<span class=\"token punctuation\">(</span>filepath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> version<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>_param1 <span class=\"token operator\">=</span> param1\n        self<span class=\"token punctuation\">.</span>_param2 <span class=\"token operator\">=</span> param2\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">_load</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">:</span>\n        load_path <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_get_load_path<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>load_path<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">_save</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">:</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span>\n        save_path <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_get_save_path<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span>save_path<span class=\"token punctuation\">)</span>\n\n \t<span class=\"token keyword\">def</span> <span class=\"token function\">_exists</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">:</span>\n        path <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_get_load_path<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> path<span class=\"token punctuation\">.</span>is_file<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">_describe</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>version<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>_version<span class=\"token punctuation\">,</span> param1<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>_param1<span class=\"token punctuation\">,</span> param2<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>_param2<span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/blog/create-custom-kedro-dataset/"},"frontmatter":{"date":"2020-05-15T05:00:00.000Z","devto_url":"","devto_id":"","title":"Create Custom Kedro Dataset","description":"Kedro provides an efficient way to build out data catalogs with their yaml api.  It allows you to be very declaritive about loading and saving your data.  For the most part you just need to tell Kedro what connector to use and its filepath.  When running Kedro takes care of all of the read/write, you just reference the catalog key.","path":"create-custom-kedro-dataset","twitter_cover":null,"cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/create-custom-kedro-dataset.png","childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB6klEQVQY02PgUdBocy7rcC6f5tE40bE6yyxps9+k2Z4ti707UywTRZX0VTQtdfUc9A0czMxdzS1cTc2dzS2dTS0cjE2tGcSU9Yy1HTOskxNMY9fmzGqMq+v0r621zi+xywo1ClfRsJFVNdbSsdPVszcwdDAycTA0tjM0sdU3ttI1MGOQVjEUVdLlU9RiEpWbt3rNrCXLZXRNZfXMeGTVgmJTtY0cxBX0tLRt9QwcjE2czC1cjEzsTcwczC0dzK0cGCSVDaSUDWRUjYRltA4ePj573tLy2pYdBw7mFFadPnth0sy5zZ0TcgtrFFRM9I3sNQwtDY3sDYyt9M2cgCSDlIqRtKopkASisNjMiMSsrpZJmzpWVDS1b962OyEpb8ma9etnrdNUsbAxdkuwidPW1tXVkLK20re2NmeQUTPWMnbSMrLXMnaUVjEWkNU2UrefYFs51bW+061yV+D0DveqXSEzT4YvmuBZuyt0RpFViLC4sL6GpLm5CcjZchomchqm8kCkbiKurKeuadfpVt3nWpVpmVRkm1lhm5NrlRZgFBxgGuxvEeRh5CkoJCCroCatYsQgoaQPROKKekAkpWIoo2osp24uq2YmoKQtoqTHI6/OJafGLafOr6ApqKAtoaIvq24opagDVAzUBQA6n4UN4GKeWwAAAABJRU5ErkJggg==","width":1000,"height":420,"src":"/static/9c62c4081aae30eab54921ce706b7414/a8734/create-custom-kedro-dataset.png","srcSet":"/static/9c62c4081aae30eab54921ce706b7414/a8734/create-custom-kedro-dataset.png 1x"},"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB6klEQVQY02PgUdBocy7rcC6f5tE40bE6yyxps9+k2Z4ti707UywTRZX0VTQtdfUc9A0czMxdzS1cTc2dzS2dTS0cjE2tGcSU9Yy1HTOskxNMY9fmzGqMq+v0r621zi+xywo1ClfRsJFVNdbSsdPVszcwdDAycTA0tjM0sdU3ttI1MGOQVjEUVdLlU9RiEpWbt3rNrCXLZXRNZfXMeGTVgmJTtY0cxBX0tLRt9QwcjE2czC1cjEzsTcwczC0dzK0cGCSVDaSUDWRUjYRltA4ePj573tLy2pYdBw7mFFadPnth0sy5zZ0TcgtrFFRM9I3sNQwtDY3sDYyt9M2cgCSDlIqRtKopkASisNjMiMSsrpZJmzpWVDS1b962OyEpb8ma9etnrdNUsbAxdkuwidPW1tXVkLK20re2NmeQUTPWMnbSMrLXMnaUVjEWkNU2UrefYFs51bW+061yV+D0DveqXSEzT4YvmuBZuyt0RpFViLC4sL6GpLm5CcjZchomchqm8kCkbiKurKeuadfpVt3nWpVpmVRkm1lhm5NrlRZgFBxgGuxvEeRh5CkoJCCroCatYsQgoaQPROKKekAkpWIoo2osp24uq2YmoKQtoqTHI6/OJafGLafOr6ApqKAtoaIvq24opagDVAzUBQA6n4UN4GKeWwAAAABJRU5ErkJggg==","aspectRatio":2.380952380952381,"src":"/static/9c62c4081aae30eab54921ce706b7414/a8734/create-custom-kedro-dataset.png","srcSet":"/static/9c62c4081aae30eab54921ce706b7414/2d6f8/create-custom-kedro-dataset.png 250w,\n/static/9c62c4081aae30eab54921ce706b7414/03ac3/create-custom-kedro-dataset.png 500w,\n/static/9c62c4081aae30eab54921ce706b7414/a8734/create-custom-kedro-dataset.png 1000w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"a287e129-b1da-5802-9dae-6d7f98057ba8"}}}